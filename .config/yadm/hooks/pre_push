#!/bin/bash
IFS=$(echo -en "\n\b")
if [[ "$(mount | grep '/dev/sda2 on / type btrfs')" == *"subvol=/ROOT)"* ]];then
    #/home/lucas/.local/share/icons/* #Too many files. It takes to long to verify all of them every time I push my changes. Think mothafocka..
    for i in $(yadm stun /home/lucas/.themes/* \
    /home/lucas/.config/Kvantum/* \
    /home/lucas/Imagens/Wallpaper/* \
    /home/lucas/.config/autostart/* \
    /home/lucas/.local/share/konsole/* \
    /home/lucas/.config/systemd/user/* \
    /home/lucas/.local/share/applications/* \
    /home/lucas/.local/share/color-schemes/* \
    /home/lucas/.local/share/aurorae/themes/* \
    /home/lucas/.local/share/plasma/plasmoids/* \
    /home/lucas/.local/share/plasma/look-and-feel/ \
    /home/lucas/.config/autostart-scripts/* --porcelain); do
        if [ -n "$i" ];then
            yadm add "/home/lucas/$(echo "$i" | awk -F '[ "]' '/??/{print $3}')";
        fi
    done
    yadm commit -a -m "atualizando"
else
    echo -e "Você não está no subvolume ROOT. push não realizado"
fi
